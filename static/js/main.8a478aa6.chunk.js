(this.webpackJsonpvote=this.webpackJsonpvote||[]).push([[0],{117:function(e,t,n){e.exports=n(285)},122:function(e,t,n){},129:function(e,t){},131:function(e,t){},223:function(e,t){},224:function(e,t){},285:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(115),o=n.n(c),u=(n(122),n(4)),s=n.n(u),i=n(8),l=n(13),d=(n(64),n(39)),m=n(22),p=function(e,t){return function(){var n=Object(r.useState)({provided:!1,key:"",passphrase:""}),c=Object(l.a)(n,2),o=c[0],u=c[1],p=Object(r.useState)(function(e){var t=e.rpc,n=e.contractAddress;return m.a.setProvider({rpc:t}),{useContract:function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=t[0],c=t[1],o=function(){var e=Object(i.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.rpc.getContract(n);case 2:t=e.sent,r=t.script,c(r.storage);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=setInterval(o,1e3);return function(){return clearInterval(e)}}),[n]),a},importKey:function(e,t){return Object(i.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",m.a.importKey(e,t));case 1:case"end":return n.stop()}}),n)})))()},getContract:function(){return Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.contract.at(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},injectMemo:function(e){return Object(i.a)(s.a.mark((function t(){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.contract.at(n);case 2:return r=t.sent,t.next=5,r.methods.main(e).send();case 5:return a=t.sent,t.next=8,a.confirmation();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))()}}}({rpc:"http://192.168.0.171:8732",contractAddress:e})),f=Object(l.a)(p,2),v=f[0],h=(f[1],v.importKey),b=function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t,n).then((function(){return u(Object(d.a)({},o,{provided:!0}))})).catch((function(){alert("Wrong secret key or passphrase provided!"),u({provided:!1,key:"",passphrase:""})}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return o.provided?a.a.createElement(t,v):a.a.createElement("form",{className:"context"},a.a.createElement("h1",null,"Sign In"),a.a.createElement("div",null,a.a.createElement("input",{type:"password",value:o.key,placeholder:"Enter your private key",onChange:function(e){return u(Object(d.a)({},o,{key:e.currentTarget.value}))}}),o.key.startsWith("edesk")&&a.a.createElement("input",{type:"password",value:o.passphrase,placeholder:"Enter passphrase",onChange:function(e){return u(Object(d.a)({},o,{passphrase:e.currentTarget.value}))}})),a.a.createElement("footer",null,a.a.createElement("button",{onClick:Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b(o.key,o.passphrase));case 1:case"end":return e.stop()}}),e)})))},"Sign In")))}},f=function(e){var t=e.content;return a.a.createElement("div",{className:"memo"},a.a.createElement("header",null,"Memo says..."),a.a.createElement("div",null,t))},v=p("KT1DBaG4RWxHw8Sjoj4gwJSeQ4KBZ61TtGvX",(function(e){var t=e.useContract,n=e.getContract,c=t(),o=Object(r.useState)(""),u=Object(l.a)(o,2),d=u[0],m=u[1],p=Object(r.useState)(!1),v=Object(l.a)(p,2),h=v[0],b=v[1],E=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,n();case 4:return r=e.sent,e.next=7,r.methods.main(t).send();case 7:return a=e.sent,e.next=10,a.confirmation();case 10:m(""),b(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0.message),b(!0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"app"},a.a.createElement("header",null,"Decentralized Memo",a.a.createElement("br",null)),a.a.createElement("main",null,a.a.createElement(f,{content:null===c||void 0===c?void 0:c.string})),a.a.createElement("footer",null,a.a.createElement("label",null,a.a.createElement("span",null,"Content"),a.a.createElement("textarea",{placeholder:"Write your memo here",value:d,disabled:h,onChange:function(e){return m(e.currentTarget.value)}})),a.a.createElement("button",{disabled:h,onClick:function(){return E(d)}},h?"Waiting for block confirmation...":"Write Memo")))})),h=function(e){var t=e.name,n=e.count,r=e.inTransaction,c=e.onVote,o=e.onRemoveCandidate;return a.a.createElement("div",{className:"votee"},a.a.createElement("h4",null,t),a.a.createElement("p",null,n),a.a.createElement("footer",null,a.a.createElement("button",{disabled:r,onClick:function(){return c(t)}},"Vote for this candidate"),a.a.createElement("button",{disabled:r,onClick:function(){return o(t)}},"Remove this candidate")))},b=p("KT1L6hJeetJVbxzMxtH2CjK7onB34H2tCG6z",(function(e){var t,n,c,o,u=e.useContract,d=e.getContract,m=u(),p=null===m||void 0===m?void 0:null===(t=m.args[0])||void 0===t?void 0:null===(n=t.args[0])||void 0===n?void 0:null===(c=n.args[0])||void 0===c?void 0:c.map((function(e){return e.args})),f="True"===(null===m||void 0===m?void 0:null===(o=m.args[1])||void 0===o?void 0:o.prim),v=Object(r.useState)(""),b=Object(l.a)(v,2),E=b[0],x=b[1],k=Object(r.useState)(f),w=Object(l.a)(k,2),g=w[0],j=w[1],O=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,d();case 4:return n=e.sent,e.next=7,n.methods.vote(t).send();case 7:return r=e.sent,e.next=10,r.confirmation();case 10:j(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0.message),j(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,d();case 4:return n=e.sent,e.next=7,n.methods.remove_candidate(t).send();case 7:return r=e.sent,e.next=10,r.confirmation();case 10:j(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0.message),j(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,d();case 4:return t=e.sent,e.next=7,t.methods.close_election().send();case 7:return n=e.sent,e.next=10,n.confirmation();case 10:j(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0.message),j(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,d();case 4:return n=e.sent,e.next=7,n.methods.add_candidate(t).send();case 7:return r=e.sent,e.next=10,r.confirmation();case 10:j(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0.message),j(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"app"},a.a.createElement("header",null,"Decentralized Voting ",a.a.createElement("br",null),f&&a.a.createElement("h1",null,"Election is Closed!")," ",a.a.createElement("br",null),g&&a.a.createElement("p",null,"Waiting for a block confirmation...")),a.a.createElement("main",{className:"vote"},(p||[]).map((function(e){return a.a.createElement(h,{key:e[0].string,name:e[0].string,count:+e[1].int,inTransaction:g,onVote:O,onRemoveCandidate:y})}))),a.a.createElement("footer",null,a.a.createElement("div",null,a.a.createElement("h4",null,"Add Candidate"),a.a.createElement("div",null,a.a.createElement("input",{type:"text",value:E,disabled:g,onChange:function(e){return x(e.currentTarget.value)}}),a.a.createElement("button",{onClick:function(){return S(E)},disabled:g},"Add candidate ",E))),a.a.createElement("div",null,a.a.createElement("h4",null,"Close Election"),a.a.createElement("button",{disabled:g,onClick:function(){window.confirm("Close this election? This action is irreversable.")&&C()}},"Close Election"))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement((function(){return"/memo"===window.location.pathname?a.a.createElement(v,null):a.a.createElement(b,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},64:function(e,t,n){},78:function(e,t){}},[[117,1,2]]]);
//# sourceMappingURL=main.8a478aa6.chunk.js.map